{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abaya\\\\Desktop\\\\Code\\\\university_code\\\\webassignment4\\\\client\\\\src\\\\context\\\\StateContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\nexport const StateContext = ({\n  children\n}) => {\n  _s();\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  const [user, setUser] = useState(storedUser ? storedUser : null);\n  const [showCart, setShowCart] = useState(false);\n  const storedCartItems = JSON.parse(localStorage.getItem(\"cartItems\"));\n  const [cartItems, setCartItems] = useState(storedCartItems ? storedCartItems : []);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [searchText, setSearchText] = useState(\"\");\n  const signOut = () => {\n    setUser(null);\n    localStorage.removeItem(\"user\");\n  };\n  const addToCart = (product, quantity) => {\n    const checkProductInCart = cartItems.find(item => item.id === product.id);\n    setTotalPrice(prevTotalPrice => {\n      return prevTotalPrice + product.price * quantity;\n    });\n    if (checkProductInCart) {\n      const updatedCartItems = cartItems.map(cartProduct => {\n        if (cartProduct.id === product.id) return {\n          ...cartProduct,\n          quantity: cartProduct.quantity + quantity\n        };else {\n          return cartProduct;\n        }\n      });\n      setCartItems(updatedCartItems);\n      if (!storedCartItems) {\n        localStorage.setItem(\"cartItems\", updatedCartItems);\n      }\n    } else {\n      product.quantity = quantity;\n      setCartItems([...cartItems, {\n        ...product\n      }]);\n    }\n  };\n  const onRemove = id => {\n    let foundProduct = cartItems.find(item => item.id === id);\n    const newCartItems = cartItems.filter(item => item.id !== id);\n    setTotalPrice(prevTotalPrice => prevTotalPrice - foundProduct.price * foundProduct.quantity);\n    setCartItems(newCartItems);\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      showCart,\n      setShowCart,\n      cartItems,\n      totalPrice,\n      addToCart,\n      onRemove,\n      setCartItems,\n      setTotalPrice,\n      setSearchText,\n      searchText,\n      user,\n      setUser,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(StateContext, \"jw2JlT2vWWDH0hR7W3IKkFp2IAc=\");\n_c = StateContext;\nexport const useStateContext = () => {\n  _s2();\n  return useContext(Context);\n};\n_s2(useStateContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"StateContext\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","Context","StateContext","children","_s","storedUser","JSON","parse","localStorage","getItem","user","setUser","showCart","setShowCart","storedCartItems","cartItems","setCartItems","totalPrice","setTotalPrice","searchText","setSearchText","signOut","removeItem","addToCart","product","quantity","checkProductInCart","find","item","id","prevTotalPrice","price","updatedCartItems","map","cartProduct","setItem","onRemove","foundProduct","newCartItems","filter","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useStateContext","_s2","$RefreshReg$"],"sources":["C:/Users/abaya/Desktop/Code/university_code/webassignment4/client/src/context/StateContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\nconst Context = createContext();\r\n\r\nexport const StateContext = ({ children }) => {\r\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n  const [user, setUser] = useState(storedUser ? storedUser : null);\r\n\r\n  const [showCart, setShowCart] = useState(false);\r\n  const storedCartItems = JSON.parse(localStorage.getItem(\"cartItems\"));\r\n  const [cartItems, setCartItems] = useState(\r\n    storedCartItems ? storedCartItems : []\r\n  );\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  const signOut = () => {\r\n    setUser(null);\r\n    localStorage.removeItem(\"user\");\r\n  };\r\n  const addToCart = (product, quantity) => {\r\n    const checkProductInCart = cartItems.find((item) => item.id === product.id);\r\n\r\n    setTotalPrice((prevTotalPrice) => {\r\n      return prevTotalPrice + product.price * quantity;\r\n    });\r\n\r\n    if (checkProductInCart) {\r\n      const updatedCartItems = cartItems.map((cartProduct) => {\r\n        if (cartProduct.id === product.id)\r\n          return {\r\n            ...cartProduct,\r\n            quantity: cartProduct.quantity + quantity,\r\n          };\r\n        else {\r\n          return cartProduct;\r\n        }\r\n      });\r\n      setCartItems(updatedCartItems);\r\n      if (!storedCartItems) {\r\n        localStorage.setItem(\"cartItems\", updatedCartItems);\r\n      }\r\n    } else {\r\n      product.quantity = quantity;\r\n      setCartItems([...cartItems, { ...product }]);\r\n    }\r\n  };\r\n\r\n  const onRemove = (id) => {\r\n    let foundProduct = cartItems.find((item) => item.id === id);\r\n    const newCartItems = cartItems.filter((item) => item.id !== id);\r\n    setTotalPrice(\r\n      (prevTotalPrice) =>\r\n        prevTotalPrice - foundProduct.price * foundProduct.quantity\r\n    );\r\n    setCartItems(newCartItems);\r\n  };\r\n\r\n  return (\r\n    <Context.Provider\r\n      value={{\r\n        showCart,\r\n        setShowCart,\r\n        cartItems,\r\n        totalPrice,\r\n        addToCart,\r\n        onRemove,\r\n        setCartItems,\r\n        setTotalPrice,\r\n        setSearchText,\r\n        searchText,\r\n        user,\r\n        setUser,\r\n        signOut,\r\n      }}\r\n    >\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport const useStateContext = () => useContext(Context);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}